# Новый сервер n8n - Данные для доступа

## Обновлено: 2026-02-07

### Данные сервера

- **IP адрес:** 83.219.243.108
- **Hostname:** n8n.oknaprof59.ru
- **SSH пользователь:** root
- **SSH пароль:** HbPFZDqCunT8Zz
- **SSH команда:** `ssh root@83.219.243.108`

### Доступ к n8n

- **URL:** https://n8n.oknaprof59.ru
- **Traefik Dashboard:** https://traefik.oknaprof59.ru
- **Email:** oknaprof59@gmail.com
- **Пароль:** db2328addf (если не менялся)

### Установленное ПО

- ✅ Docker
- ✅ n8n (последняя версия)
- ✅ Traefik (reverse proxy)
- ✅ Автозапуск при перезагрузке сервера

### Полезные команды SSH

```bash
# Подключение к серверу
ssh root@83.219.243.108

# Проверка запущенных контейнеров
docker ps

# Проверка всех контейнеров (включая остановленные)
docker ps -a

# Логи n8n (последние 50 строк)
docker logs n8n-n8n-1 --tail 50

# Логи в реальном времени
docker logs n8n-n8n-1 -f

# Перезапуск n8n
docker restart n8n-n8n-1

# Перезапуск всех сервисов
cd ~/n8n-compose && docker compose restart

# Остановка всех сервисов
cd ~/n8n-compose && docker compose down

# Запуск всех сервисов
cd ~/n8n-compose && docker compose up -d

# Проверка состояния сервиса
systemctl status n8n
```

### Настройка MCP

После того как n8n запустится:

1. Откройте https://n8n.oknaprof59.ru
2. Войдите в систему
3. Перейдите в Settings → API
4. Создайте новый API ключ
5. Обновите `.mcp.json`:

```json
{
  "mcpServers": {
    "n8n-mcp": {
      "type": "stdio",
      "command": "cmd",
      "args": ["/c", "npx", "-y", "n8n-mcp"],
      "env": {
        "MCP_MODE": "stdio",
        "N8N_API_URL": "https://n8n.oknaprof59.ru",
        "N8N_API_KEY": "НОВЫЙ_API_КЛЮЧ_СЮДА"
      }
    }
  }
}
```

### Диагностика проблем

Если n8n не доступен через браузер:

1. **Проверьте контейнеры:**
   ```bash
   docker ps -a
   ```
   Должны быть запущены: `n8n-n8n-1` и `n8n-traefik-1`

2. **Проверьте логи:**
   ```bash
   docker logs n8n-n8n-1 --tail 100
   docker logs n8n-traefik-1 --tail 100
   ```

3. **Проверьте локальный доступ к n8n:**
   ```bash
   curl http://localhost:5678
   ```

4. **Перезапустите сервисы:**
   ```bash
   cd ~/n8n-compose && docker compose restart
   ```

5. **Проверьте DNS:**
   - Убедитесь что n8n.oknaprof59.ru указывает на 83.219.243.108
   - Можно проверить: `nslookup n8n.oknaprof59.ru`

### Резервное копирование

Данные n8n хранятся в Docker volume `n8n_n8n_data`.

Для бэкапа:
```bash
docker run --rm -v n8n_n8n_data:/data -v $(pwd):/backup alpine tar czf /backup/n8n-backup-$(date +%Y%m%d).tar.gz /data
```

Для восстановления:
```bash
docker run --rm -v n8n_n8n_data:/data -v $(pwd):/backup alpine tar xzf /backup/n8n-backup-YYYYMMDD.tar.gz -C /
```

---

**Примечание:** Все данные для доступа к новому серверу сохранены в этом файле.
