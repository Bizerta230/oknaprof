# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Avito Webhook Processor

## üìã –ò–º–µ—é—â–∏–µ—Å—è –¥–∞–Ω–Ω—ã–µ

### ‚úÖ PostgreSQL (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
- **Host**: `localhost`
- **Database**: `avito_db`
- **User**: `avito_user`
- **Password**: `AvitoDB2026Secure!Pass`
- **Port**: `5432`

### ‚úÖ Telegram Bot
- **Bot Name**: Okna Prof
- **Username**: @oknaprof59_bot
- **Token**: `8572486644:AAEoc4R0nJVamvlWJhKHesQp2RGQJ8yLTjA`
- **Chat ID**: –ù—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å (—Å–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –Ω–∏–∂–µ)

### ‚úÖ Avito API
- **Client ID**: `CSQfc0XHQJDbIzlT6nI6`
- **Client Secret**: `mxUMrKpNcYVlNjxb5dFwVU-oLnlVE9XvOPk6_E1z`
- **Redirect URL**: `https://n8n.oknaprof59.ru/`
- **–î–æ—Å—Ç—É–ø–Ω—ã–µ API**: `messenger:read`, `messenger:write`

---

## üîß –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ Telegram Chat ID

#### 1.1 –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞: **@oknaprof59_bot**
3. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞–ø—É—Å—Ç–∏—Ç—å"** –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä: `–¢–µ—Å—Ç`

#### 1.2 –ü–æ–ª—É—á–∏—Ç–µ –≤–∞—à Chat ID

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä**

–û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://api.telegram.org/bot8572486644:AAEoc4R0nJVamvlWJhKHesQp2RGQJ8yLTjA/getUpdates
```

–í –æ—Ç–≤–µ—Ç–µ –Ω–∞–π–¥–∏—Ç–µ –≤–∞—à **Chat ID**:
```json
{
  "result": [
    {
      "message": {
        "chat": {
          "id": 123456789,  ‚Üê –≠—Ç–æ –≤–∞—à Chat ID
          "first_name": "–í–∞—à–µ –ò–º—è"
        }
      }
    }
  ]
}
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É**

```bash
curl "https://api.telegram.org/bot8572486644:AAEoc4R0nJVamvlWJhKHesQp2RGQJ8yLTjA/getUpdates"
```

**‚úçÔ∏è –ó–∞–ø–∏—à–∏—Ç–µ –≤–∞—à Chat ID –∑–¥–µ—Å—å**: `_________________`

---

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ n8n

–û—Ç–∫—Ä–æ–π—Ç–µ https://n8n.oknaprof59.ru –∏ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É.

---

#### 2.1 PostgreSQL (Avito PostgreSQL)

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ**: Settings (‚öôÔ∏è) ‚Üí Credentials
2. **–ù–∞–∂–º–∏—Ç–µ**: "Add Credential"
3. **–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø**: PostgreSQL
4. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ**:

```
Name: Avito PostgreSQL
Host: localhost
Database: avito_db
User: avito_user
Password: AvitoDB2026Secure!Pass
Port: 5432
SSL: Disable
```

5. **–ù–∞–∂–º–∏—Ç–µ**: "Test" ‚Üí –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "Connection successful"
6. **–ù–∞–∂–º–∏—Ç–µ**: "Save"

---

#### 2.2 Telegram (Avito Notifications Bot)

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ**: Settings (‚öôÔ∏è) ‚Üí Credentials
2. **–ù–∞–∂–º–∏—Ç–µ**: "Add Credential"
3. **–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø**: Telegram
4. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ**:

```
Name: Avito Notifications Bot
Access Token: 8572486644:AAEoc4R0nJVamvlWJhKHesQp2RGQJ8yLTjA
```

5. **–ù–∞–∂–º–∏—Ç–µ**: "Save"

---

#### 2.3 Avito OAuth2 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –¥–ª—è –æ–±–æ–≥–∞—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏)

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ—Ç —à–∞–≥ –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω. –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ workflow –æ–±–æ–≥–∞—â–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ Avito API –æ—Ç–∫–ª—é—á–µ–Ω–æ, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —ç—Ç–æ –ø–æ–∑–∂–µ.

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ**: Settings (‚öôÔ∏è) ‚Üí Credentials
2. **–ù–∞–∂–º–∏—Ç–µ**: "Add Credential"
3. **–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø**: OAuth2 API
4. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ**:

```
Name: Avito API
Grant Type: Client Credentials
Access Token URL: https://api.avito.ru/token
Client ID: CSQfc0XHQJDbIzlT6nI6
Client Secret: mxUMrKpNcYVlNjxb5dFwVU-oLnlVE9XvOPk6_E1z
Scope: messenger:read messenger:write
Authentication: Body
```

5. **–ù–∞–∂–º–∏—Ç–µ**: "Connect my account"
6. **–ù–∞–∂–º–∏—Ç–µ**: "Save"

---

### –®–∞–≥ 3: –ü—Ä–∏–≤—è–∑–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫ —É–∑–ª–∞–º workflow

#### 3.1 –û—Ç–∫—Ä–æ–π—Ç–µ workflow "Avito Webhook Processor"

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é n8n
2. –ù–∞–π–¥–∏—Ç–µ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ "Avito Webhook Processor"

---

#### 3.2 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–∑–ª—ã PostgreSQL

**–£–∑–ª—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** (4 —à—Ç—É–∫–∏):
- ‚úÖ `Check for Duplicates`
- ‚úÖ `Insert New Order`
- ‚úÖ `Update Existing Order`
- ‚úÖ `Log Error to Database`

**–î–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞**:
1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —É–∑–µ–ª
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ–ª–µ **"Credential to connect with"**
3. –í –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ –≤—ã–±–µ—Ä–∏—Ç–µ: **"Avito PostgreSQL"**
4. –£–∑–µ–ª –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

---

#### 3.3 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–∑–ª—ã Telegram

**–£–∑–ª—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** (2 —à—Ç—É–∫–∏):
- ‚úÖ `Telegram Notification`
- ‚úÖ `Error Alert`

**–î–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞**:

1. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —É–∑–µ–ª**

2. **–ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä "Chat ID"**
   - –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: `YOUR_TELEGRAM_CHAT_ID`
   - **–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à Chat ID** (—á–∏—Å–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã –ø–æ–ª—É—á–∏–ª–∏ –≤ –®–∞–≥–µ 1)
   - –ù–∞–ø—Ä–∏–º–µ—Ä: `123456789`

3. **–ù–∞–π–¥–∏—Ç–µ –ø–æ–ª–µ "Credential to connect with"**
   - –í –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ –≤—ã–±–µ—Ä–∏—Ç–µ: **"Avito Notifications Bot"**

4. –£–∑–µ–ª –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

---

### –®–∞–≥ 4: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è

1. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Save"** –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
2. **–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ workflow**: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É ‚Üí **ON**
3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL webhook**: –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å
   ```
   https://n8n.oknaprof59.ru/webhook/avito-marketplace
   ```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫

–ü–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —É–±–µ–¥–∏—Ç–µ—Å—å:

- [ ] PostgreSQL —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] Telegram —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω—ã
- [ ] –ü–æ–ª—É—á–µ–Ω Telegram Chat ID
- [ ] –í—Å–µ 4 —É–∑–ª–∞ PostgreSQL —Å–≤—è–∑–∞–Ω—ã —Å "Avito PostgreSQL"
- [ ] –û–±–∞ —É–∑–ª–∞ Telegram —Å–≤—è–∑–∞–Ω—ã —Å "Avito Notifications Bot"
- [ ] –í –æ–±–æ–∏—Ö —É–∑–ª–∞—Ö Telegram –∑–∞–º–µ–Ω–µ–Ω Chat ID –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π
- [ ] Workflow —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- [ ] Workflow –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å ON)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ webhook

–û—Ç–∫—Ä–æ–π—Ç–µ **–∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É** (cmd) –∏–ª–∏ **PowerShell** –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
curl -X POST https://n8n.oknaprof59.ru/webhook/avito-marketplace -H "Content-Type: application/json" -d "{\"event_type\":\"new_order\",\"timestamp\":\"2026-02-07T12:00:00Z\",\"data\":{\"order_id\":\"TEST_12345\",\"status\":\"pending\",\"total_amount\":5000,\"items\":[{\"listing_id\":\"999\",\"title\":\"–¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–≤–∞—Ä\",\"price\":5000,\"quantity\":1}],\"customer\":{\"name\":\"–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–∫—É–ø–∞—Ç–µ–ª—å\",\"phone\":\"+79991234567\",\"email\":\"test@example.com\"}}}"
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**:

1. ‚úÖ **–û—Ç–≤–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 2 —Å–µ–∫—É–Ω–¥**:
   ```json
   {
     "status": "received",
     "webhook_id": "...",
     "timestamp": "...",
     "message": "Order processed successfully"
   }
   ```

2. ‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram**:
   ```
   üõí –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ Avito

   üì¶ –ó–∞–∫–∞–∑: TEST_12345
   üí∞ –°—É–º–º–∞: 5000 ‚ÇΩ
   üë§ –ö–ª–∏–µ–Ω—Ç: –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–∫—É–ø–∞—Ç–µ–ª—å
   üì± –¢–µ–ª–µ—Ñ–æ–Ω: +79991234567

   ‚è∞ 07.02.2026 14:30
   ```

3. ‚úÖ **–ó–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**:
   ```bash
   ssh root@83.219.243.108
   docker exec -it postgres-avito psql -U avito_user -d avito_db -c \
     "SELECT id, external_id, total_amount, customer_name FROM avito_orders ORDER BY id DESC LIMIT 1;"
   ```

   –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø–∏—Å—å —Å `external_id = TEST_12345`

---

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ n8n

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://n8n.oknaprof59.ru
2. –ù–∞–∂–º–∏—Ç–µ **"Executions"** (–í—ã–ø–æ–ª–Ω–µ–Ω–∏—è) –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏
3. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
4. –û–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å **–∑–µ–ª–µ–Ω—ã–º** (—É—Å–ø–µ—à–Ω–æ)
5. –ù–∞–∂–º–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–≤–æ–¥ –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞:
   - `Webhook Trigger` - –ø–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ
   - `Security Validation` - —Å–æ–∑–¥–∞–Ω webhook_id
   - `Initial Data Transformation` - —Å–æ–∑–¥–∞–Ω –æ–±—ä–µ–∫—Ç order
   - `Order Validation` - validation.is_valid = true
   - `Check for Duplicates` - –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)
   - `Is Duplicate?` - false (–ø–æ—à–µ–ª –ø–æ –≤–µ—Ç–∫–µ Insert)
   - `Insert New Order` - —É—Å–ø–µ—à–Ω–æ –≤—Å—Ç–∞–≤–ª–µ–Ω–æ
   - `Quick Webhook Response` - –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –æ—Ç–≤–µ—Ç
   - `Telegram Notification` - –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

---

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

–û—Ç–ø—Ä–∞–≤—å—Ç–µ **—Ç–æ—Ç –∂–µ —Å–∞–º—ã–π** webhook –µ—â–µ —Ä–∞–∑:

```bash
curl -X POST https://n8n.oknaprof59.ru/webhook/avito-marketplace -H "Content-Type: application/json" -d "{\"event_type\":\"new_order\",\"timestamp\":\"2026-02-07T12:00:00Z\",\"data\":{\"order_id\":\"TEST_12345\",\"status\":\"pending\",\"total_amount\":5000,\"items\":[{\"listing_id\":\"999\",\"title\":\"–¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–≤–∞—Ä\",\"price\":5000,\"quantity\":1}],\"customer\":{\"name\":\"–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–∫—É–ø–∞—Ç–µ–ª—å\",\"phone\":\"+79991234567\",\"email\":\"test@example.com\"}}}"
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è**:
- ‚úÖ Workflow –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ –ø–æ –≤–µ—Ç–∫–µ `Update Existing Order`
- ‚úÖ –í –±–∞–∑–µ –¥–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∑–∞–ø–∏—Å—å (–Ω–µ —Å–æ–∑–¥–∞—Ç—å—Å—è –Ω–æ–≤–∞—è)
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram –≤—Å–µ —Ä–∞–≤–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è

---

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –ø—Ä–∏—Ö–æ–¥—è—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –∑–∞–ø—É—Å—Ç–∏–ª–∏ –±–æ—Ç–∞ (@oknaprof59_bot)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Chat ID –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (—á–∏—Å–ª–æ)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞:
   ```bash
   curl "https://api.telegram.org/bot8572486644:AAEoc4R0nJVamvlWJhKHesQp2RGQJ8yLTjA/getMe"
   ```
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω:
   ```bash
   ssh root@83.219.243.108
   docker ps | grep postgres-avito
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ n8n
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –≤—Ä—É—á–Ω—É—é:
   ```bash
   docker exec -it postgres-avito psql -U avito_user -d avito_db -c "SELECT 1;"
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: Workflow –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç webhook

**–†–µ—à–µ–Ω–∏–µ**:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ workflow **–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω** (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å ON)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL: `https://n8n.oknaprof59.ru/webhook/avito-marketplace`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ n8n —Ä–∞–±–æ—Ç–∞–µ—Ç:
   ```bash
   ssh root@83.219.243.108
   docker ps | grep n8n
   ```

---

## üìù –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Avito

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ webhook –≤ Avito:

1. –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç Avito –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **API** ‚Üí **Webhooks**
3. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π webhook:
   - **URL**: `https://n8n.oknaprof59.ru/webhook/avito-marketplace`
   - **–°–æ–±—ã—Ç–∏—è**: `new_order`, `order_status_change`
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

–¢–µ–ø–µ—Ä—å –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö –æ—Ç Avito! üéâ

---

## üìä –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **Webhook URL** | `https://n8n.oknaprof59.ru/webhook/avito-marketplace` |
| **PostgreSQL Host** | `localhost:5432` |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | `avito_db` |
| **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î** | `avito_user` |
| **Telegram Bot** | @oknaprof59_bot |
| **Avito Client ID** | `CSQfc0XHQJDbIzlT6nI6` |

---

**–°–æ–∑–¥–∞–Ω–æ**: 2026-02-07
**–í–µ—Ä—Å–∏—è**: 1.0
